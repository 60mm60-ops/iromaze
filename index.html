<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé® „ÅÑ„Çç„Åæ„Åú„ÅÇ„Åù„Å≥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Comic Sans MS', 'Hiragino Kaku Gothic Pro', sans-serif;
            background: linear-gradient(135deg, #A8D8F8 0%, #B8E8B8 50%, #FFD8E8 100%);
            min-height: 100vh; padding: 20px; color: #333; text-align: center;
            overflow-x: hidden;
        }
        
        /* ËÉåÊôØ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ */
        .background-stars {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1;
        }
        .star {
            position: absolute; width: 4px; height: 4px; background: #FFD700; border-radius: 50%;
            animation: twinkle 2s infinite alternate;
        }
        @keyframes twinkle { 0%{opacity:0.3;} 100%{opacity:1;} }
        
        .container { 
            max-width: 800px; margin: 0 auto; background: rgba(255,255,255,0.95); border-radius: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; border: 5px solid #FFC107;
            backdrop-filter: blur(10px);
        }
        
        .header { 
            background: linear-gradient(45deg, #FFC1E3, #A8D8F8, #B8E8B8); color: white; padding: 30px; 
            text-align: center; position: relative; overflow: hidden;
        }
        .header h1 { 
            font-size: 3.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: bounceIn 1s ease-out;
        }
        .header p { font-size: 1.8em; opacity: 0.9; animation: fadeIn 1.5s ease-out; }
        
        @keyframes bounceIn {
            0%{ transform: scale(0.3); opacity: 0; }
            50%{ transform: scale(1.05); }
            70%{ transform: scale(0.9); }
            100%{ transform: scale(1); opacity: 1; }
        }
        @keyframes fadeIn { 0%{opacity:0;} 100%{opacity:1;} }
        
        .score-board {
            background: linear-gradient(45deg, #FFD700, #FFA500); padding: 15px; margin: 20px;
            border-radius: 20px; font-size: 1.5em; font-weight: bold; color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .main-content { padding: 40px 30px; background: rgba(255,255,255,0.8); }
        
        .controls { 
            display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; 
        }
        .control-button {
            background: linear-gradient(45deg, #FF6B6B, #FF8C00); color: white; border: none; border-radius: 20px;
            padding: 12px 24px; font-size: 1.3em; font-weight: bold; cursor: pointer; 
            transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative; overflow: hidden;
        }
        .control-button:hover { 
            transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 20px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #FF8C8C, #FFAA00);
        }
        .control-button:active { transform: translateY(-1px) scale(0.98); }
        
        .fun-mode-toggle {
            background: linear-gradient(45deg, #9C27B0, #E91E63) !important;
            animation: rainbowPulse 3s infinite;
        }
        @keyframes rainbowPulse {
            0%{ background: linear-gradient(45deg, #9C27B0, #E91E63); }
            25%{ background: linear-gradient(45deg, #FF9800, #FFC107); }
            50%{ background: linear-gradient(45deg, #4CAF50, #8BC34A); }
            75%{ background: linear-gradient(45deg, #2196F3, #03DAC6); }
            100%{ background: linear-gradient(45deg, #9C27B0, #E91E63); }
        }
        
        .color-count-display {
            background: linear-gradient(45deg, #FFC107, #FF9800); color: white; padding: 18px; 
            border-radius: 25px; font-size: 1.4em; font-weight: bold; margin-bottom: 25px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2); text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.02);} }
        
        .color-buttons {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 18px; margin-bottom: 40px; justify-items: center;
        }
        .color-button {
            width: 100px; height: 100px; border-radius: 50%; border: 6px solid white; cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            box-shadow: 0 8px 20px rgba(0,0,0,0.2); position: relative;
            display: flex; align-items: center; justify-content: center; font-size: 1.5em; color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7); font-weight: bold;
            overflow: hidden;
        }
        
        .color-button::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            opacity: 0; transition: opacity 0.3s ease;
        }
        .color-button:hover::before { opacity: 1; }
        
        .color-button:hover { 
            transform: scale(1.15) rotate(5deg); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            border-color: #FFD700;
        }
        .color-button.selected { 
            transform: scale(1.25) rotate(15deg); border-color: #FFD700; border-width: 8px; 
            animation: selectedBounce 0.6s ease-in-out;
            box-shadow: 0 20px 40px rgba(255,215,0,0.5);
        }
        @keyframes selectedBounce { 
            0%,100%{ transform: scale(1.25) rotate(15deg);} 
            25%{ transform: scale(1.35) rotate(-10deg);} 
            50%{ transform: scale(1.3) rotate(20deg);} 
            75%{ transform: scale(1.28) rotate(-5deg);} 
        }
        
        /* Ëâ≤„ÅÆÂÆöÁæ© */
        .red { background: radial-gradient(circle at 30% 30%, #FF8A8A, #FF6B6B); }
        .yellow { background: radial-gradient(circle at 30% 30%, #FFF45C, #FFD700); }
        .blue { background: radial-gradient(circle at 30% 30%, #6B8EFF, #4169E1); }
        .green { background: radial-gradient(circle at 30% 30%, #5CFF5C, #32CD32); }
        .orange { background: radial-gradient(circle at 30% 30%, #FFAA5C, #FF8C00); }
        .purple { background: radial-gradient(circle at 30% 30%, #B85CFF, #9932CC); }
        .white { background: radial-gradient(circle at 30% 30%, #FFFFFF, #F5F5F5); border-color: #333; color: #333; text-shadow: none; }
        .black { background: radial-gradient(circle at 30% 30%, #333333, #000000); }
        .pink { background: radial-gradient(circle at 30% 30%, #FF8ABA, #FF69B4); }
        .brown { background: radial-gradient(circle at 30% 30%, #A0673B, #8B4513); }
        .gray { background: radial-gradient(circle at 30% 30%, #A0A0A0, #808080); }
        .lime { background: radial-gradient(circle at 30% 30%, #5CFF5C, #32FF32); }
        .lightblue { background: radial-gradient(circle at 30% 30%, #B0E0FF, #87CEEB); }
        
        .selected-colors { margin-bottom: 35px; text-align: center; }
        .selected-colors h3 { 
            font-size: 2.2em; margin-bottom: 25px; color: #333; 
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        .selected-display { 
            display: flex; justify-content: center; gap: 12px; margin-bottom: 25px; flex-wrap: wrap; 
        }
        .selected-color { 
            width: 70px; height: 70px; border-radius: 50%; border: 5px solid #FFC107;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2); transition: all 0.5s ease; 
            position: relative; animation: popIn 0.5s ease-out;
        }
        @keyframes popIn {
            0%{ transform: scale(0) rotate(180deg); opacity: 0; }
            100%{ transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .selected-color .remove-btn {
            position: absolute; top: -10px; right: -10px; width: 24px; height: 24px;
            background: linear-gradient(45deg, #FF6B6B, #FF8C8C); border: none; border-radius: 50%; 
            color: white; font-size: 14px; cursor: pointer; display: flex; align-items: center; 
            justify-content: center; font-weight: bold; box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        .selected-color .remove-btn:hover {
            transform: scale(1.2); background: linear-gradient(45deg, #FF5252, #FF7979);
        }
        
        .mix-button {
            background: linear-gradient(45deg, #FFC1E3, #A8D8F8, #B8E8B8); color: white; border: none;
            border-radius: 30px; padding: 25px 50px; font-size: 2.2em; font-weight: bold; cursor: pointer;
            transition: all 0.4s ease; box-shadow: 0 10px 25px rgba(0,0,0,0.2); 
            margin: 0 20px; position: relative; overflow: hidden;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .mix-button::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.6s ease;
        }
        .mix-button:hover::before { left: 100%; }
        .mix-button:hover { 
            transform: translateY(-5px) scale(1.05); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #FFD1E8, #B8E8F8, #C8F8C8);
        }
        .mix-button:disabled { 
            background: #ccc; cursor: not-allowed; transform: none; opacity: 0.6;
        }
        
        .result-area { text-align: center; margin-top: 45px; }
        .result-area h3 { 
            font-size: 2.8em; margin-bottom: 35px; color: #333; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .result-color {
            width: 220px; height: 220px; border-radius: 50%; margin: 0 auto 35px; 
            border: 10px solid #FFC107; box-shadow: 0 20px 50px rgba(0,0,0,0.2); 
            background: #f0f0f0; display: flex; align-items: center; justify-content: center;
            font-size: 3.5em; color: #999; flex-direction: column; padding: 25px;
            transition: all 0.6s ease; position: relative; overflow: hidden;
        }
        .result-color.mixed {
            animation: resultReveal 1s ease-out;
            border-color: #FFD700;
            box-shadow: 0 25px 60px rgba(255,215,0,0.4);
        }
        @keyframes resultReveal {
            0%{ transform: scale(0.8) rotate(-180deg); opacity: 0; }
            50%{ transform: scale(1.1) rotate(0deg); }
            100%{ transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        .result-color span { 
            font-size: 0.35em; color: #333; font-weight: bold; margin-top: 12px; 
            text-shadow: 1px 1px 2px rgba(255,255,255,0.7);
        }
        .result-color .description {
            font-size: 0.25em; color: #666; margin-top: 8px; line-height: 1.3;
            text-align: center; max-width: 180px;
        }
        
        .clear-button {
            background: linear-gradient(45deg, #FF6B6B, #FF8C8C); color: white; border: none; 
            border-radius: 25px; padding: 18px 36px; font-size: 1.6em; font-weight: bold; 
            cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        .clear-button:hover { 
            transform: translateY(-3px) scale(1.05); 
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #FF8C8C, #FFAAAA);
        }
        
        .celebration { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            pointer-events: none; z-index: 1000; 
        }
        .celebration.active { display: block; animation: celebrate 3s ease-out; }
        @keyframes celebrate { 
            0%{opacity:0;} 
            20%{opacity:1;} 
            80%{opacity:1;} 
            100%{opacity:0;} 
        }
        
        .confetti { 
            position: absolute; width: 12px; height: 12px; border-radius: 50%;
            animation: fall 3s linear infinite; 
        }
        @keyframes fall { 
            to { 
                transform: translateY(100vh) rotate(720deg); 
                opacity: 0;
            } 
        }
        
        .fun-mode {
            background: linear-gradient(45deg, #FF6B6B 0%, #4ECDC4 25%, #45B7D1 50%, #96CEB4 75%, #FFEAA7 100%) !important;
            background-size: 300% 300% !important;
            animation: funModeGradient 2s ease infinite !important;
        }
        @keyframes funModeGradient {
            0%{ background-position: 0% 50%; }
            50%{ background-position: 100% 50%; }
            100%{ background-position: 0% 50%; }
        }
        
        .achievement {
            position: fixed; top: 20px; right: 20px; background: linear-gradient(45deg, #4CAF50, #8BC34A);
            color: white; padding: 15px 25px; border-radius: 20px; font-weight: bold;
            box-shadow: 0 8px 20px rgba(0,0,0,0.3); transform: translateX(400px);
            transition: transform 0.5s ease; z-index: 1001; font-size: 1.2em;
        }
        .achievement.show { transform: translateX(0); }
        
        @media (max-width: 768px) {
            .color-buttons { grid-template-columns: repeat(3, 1fr); gap: 12px; }
            .color-button { width: 80px; height: 80px; font-size: 1.2em; }
            .header h1 { font-size: 2.8em; } 
            .header p { font-size: 1.4em; }
            .result-color { width: 180px; height: 180px; font-size: 3em; }
            .main-content { padding: 25px 20px; }
            .selected-color { width: 60px; height: 60px; }
            .controls { flex-direction: column; align-items: center; gap: 10px; }
            .mix-button { font-size: 1.8em; padding: 20px 40px; }
        }
    </style>
</head>
<body>
    <!-- ËÉåÊôØ„ÅÆÊòü -->
    <div class="background-stars" id="backgroundStars"></div>
    
    <div class="container">
        <div class="header">
            <h1>üé® „ÅÑ„Çç„Åæ„Åú„ÅÇ„Åù„Å≥</h1>
            <p>„ÅÑ„Çç„Çí„Åà„Çâ„Çì„Åß „Åæ„Åú„Å¶„Åø„Çà„ÅÜÔºÅ</p>
            <div class="score-board">
                <span id="scoreText">„Å§„Åè„Å£„Åü„ÅÑ„Çç: 0„Åì</span> ‚≠ê
            </div>
        </div>

        <div class="main-content">
            <div class="controls">
                <button class="control-button" onclick="addColorSlot()" title="„ÇÇ„Å£„Å®„Åü„Åè„Åï„Çì„ÅÆËâ≤„Çí„Åæ„Åú„Çâ„Çå„Çã„ÇàÔºÅ">„ÅÑ„Çç„Çí„Åµ„ÇÑ„Åô ‚ûï</button>
                <button class="control-button" onclick="removeColorSlot()" title="„Åæ„Åú„ÇãËâ≤„ÇíÂ∞ë„Å™„Åè„Åô„Çã„Çà">„ÅÑ„Çç„Çí„Å∏„Çâ„Åô ‚ûñ</button>
                <button class="control-button" onclick="toggleColorVisibility()" title="Ëâ≤„ÇíÈö†„Åó„Åü„ÇäË¶ã„Åõ„Åü„Çä„Åß„Åç„Çã„Çà">„ÅÑ„Çç„Çí„Åã„Åè„Åô üëÅÔ∏è</button>
                <button class="control-button fun-mode-toggle" onclick="toggleFunMode()" title="„Åü„ÅÆ„Åó„ÅÑ„É¢„Éº„Éâ„Å´„Åô„Çã„ÇàÔºÅ">„Åü„ÅÆ„Åó„ÅÑ„É¢„Éº„Éâ üéâ</button>
            </div>

            <div class="color-count-display" id="colorCountDisplay">
                „Åæ„Åú„Çâ„Çå„Çã„ÅÑ„Çç„ÅÆ„Åã„Åö: <span id="maxColors">4</span>„Åì
            </div>

            <div class="color-buttons" id="colorButtons">
                <div class="color-button red" onclick="selectColor('red', '#FF6B6B', '„ÅÇ„Åã')" title="„Çä„Çì„Åî„ÅÆËâ≤„Å†„ÇàÔºÅ">„ÅÇ„Åã</div>
                <div class="color-button yellow" onclick="selectColor('yellow', '#FFD700', '„Åç„ÅÑ„Çç')" title="„Éê„Éä„Éä„ÅÆËâ≤„Å†„ÇàÔºÅ">„Åç„ÅÑ„Çç</div>
                <div class="color-button blue" onclick="selectColor('blue', '#4169E1', '„ÅÇ„Åä')" title="Á©∫„ÅÆËâ≤„Å†„ÇàÔºÅ">„ÅÇ„Åä</div>
                <div class="color-button green" onclick="selectColor('green', '#32CD32', '„Åø„Å©„Çä')" title="Ëëâ„Å£„Å±„ÅÆËâ≤„Å†„ÇàÔºÅ">„Åø„Å©„Çä</div>
                <div class="color-button orange" onclick="selectColor('orange', '#FF8C00', '„Ç™„É¨„É≥„Ç∏')" title="„Åø„Åã„Çì„ÅÆËâ≤„Å†„ÇàÔºÅ">„Ç™„É¨„É≥„Ç∏</div>
                <div class="color-button purple" onclick="selectColor('purple', '#9932CC', '„ÇÄ„Çâ„Åï„Åç')" title="„Å∂„Å©„ÅÜ„ÅÆËâ≤„Å†„ÇàÔºÅ">„ÇÄ„Çâ„Åï„Åç</div>
                <div class="color-button pink" onclick="selectColor('pink', '#FF69B4', '„Éî„É≥„ÇØ')" title="„Åï„Åè„Çâ„ÅÆËâ≤„Å†„ÇàÔºÅ">„Éî„É≥„ÇØ</div>
                <div class="color-button brown" onclick="selectColor('brown', '#8B4513', '„Å°„ÇÉ„ÅÑ„Çç')" title="„ÉÅ„Éß„Ç≥„É¨„Éº„Éà„ÅÆËâ≤„Å†„ÇàÔºÅ">„Å°„ÇÉ„ÅÑ„Çç</div>
                <div class="color-button lightblue" onclick="selectColor('lightblue', '#87CEEB', '„Åø„Åö„ÅÑ„Çç')" title="Êµ∑„ÅÆËâ≤„Å†„ÇàÔºÅ">„Åø„Åö„ÅÑ„Çç</div>
                <div class="color-button lime" onclick="selectColor('lime', '#32FF32', '„Åç„Åø„Å©„Çä')" title="„É°„É≠„É≥„ÅÆËâ≤„Å†„ÇàÔºÅ">„Åç„Åø„Å©„Çä</div>
                <div class="color-button white" onclick="selectColor('white', '#FFFFFF', '„Åó„Çç')" title="Èõ™„ÅÆËâ≤„Å†„ÇàÔºÅ">„Åó„Çç</div>
                <div class="color-button black" onclick="selectColor('black', '#000000', '„Åè„Çç')" title="Â§ú„ÅÆËâ≤„Å†„ÇàÔºÅ">„Åè„Çç</div>
            </div>

            <div class="selected-colors">
                <h3>„Åà„Çâ„Çì„Å†„ÅÑ„Çç</h3>
                <div class="selected-display" id="selectedDisplay"></div>
                <button class="mix-button" id="mixButton" onclick="mixColors()" disabled title="Ëâ≤„Çí„Åæ„Åú„Å¶Êñ∞„Åó„ÅÑËâ≤„Çí„Å§„Åè„Çç„ÅÜÔºÅ">
                    „ÅÑ„Çç„Çí„Åæ„Åú„Çã ‚ú®
                </button>
            </div>

            <div class="result-area">
                <h3>„Åß„Åç„Åü„ÅÑ„Çç</h3>
                <div class="result-color" id="resultColor">Ôºü</div>
                <button class="clear-button" onclick="clearAll()" title="„ÇÇ„ÅÜ„ÅÑ„Å°„Å©ÊúÄÂàù„Åã„ÇâÈÅä„Åº„ÅÜÔºÅ">„ÇÇ„ÅÜ„ÅÑ„Å°„Å© üîÑ</button>
            </div>
        </div>
    </div>

    <div class="celebration" id="celebration"></div>
    <div class="achievement" id="achievement"></div>

    <script>
        let selectedColors = [];
        let maxColorsToMix = 4;
        let isFunMode = false;
        let mixCount = 0;
        let achievements = [];

        // Áâ©ÁêÜÁöÑ„Å´Ê≠£Á¢∫„Å™Ëâ≤Ê∑∑ÂêàÁµêÊûúËæûÊõ∏ÔºàÊ∏õÁÆóÊ∑∑ÂêàÔºöÁµµ„ÅÆÂÖ∑„ÅÆÊ∑∑Ëâ≤Ôºâ
        const colorResults = {
            // ÂçòËâ≤Ôºà„Åù„ÅÆ„Åæ„ÅæÔºâ
            'red': { color: '#FF6B6B', name: '„ÅÇ„Åã', object: 'üçé', description: '„Çä„Çì„Åî„Åø„Åü„ÅÑ„Å´ „ÅÇ„Åã„ÅÑ„Å≠ÔºÅ' },
            'yellow': { color: '#FFD700', name: '„Åç„ÅÑ„Çç', object: 'üåª', description: '„Å≤„Åæ„Çè„Çä„Åø„Åü„ÅÑ„Å´ „Åç„ÅÑ„Çç„ÅÑ„Å≠ÔºÅ' },
            'blue': { color: '#4169E1', name: '„ÅÇ„Åä', object: 'üåä', description: '„ÅÜ„Åø„Åø„Åü„ÅÑ„Å´ „ÅÇ„Åä„ÅÑ„Å≠ÔºÅ' },
            'green': { color: '#32CD32', name: '„Åø„Å©„Çä', object: 'üçÉ', description: '„ÅØ„Å£„Å±„Åø„Åü„ÅÑ„Å´ „Åø„Å©„Çä„Å†„Å≠ÔºÅ' },
            'orange': { color: '#FF8C00', name: '„Ç™„É¨„É≥„Ç∏', object: 'üçä', description: '„Åø„Åã„Çì„Åø„Åü„ÅÑ„Å´ „Ç™„É¨„É≥„Ç∏„Å†„Å≠ÔºÅ' },
            'purple': { color: '#9932CC', name: '„ÇÄ„Çâ„Åï„Åç', object: 'üçá', description: '„Å∂„Å©„ÅÜ„Åø„Åü„ÅÑ„Å´ „ÇÄ„Çâ„Åï„Åç„Å†„Å≠ÔºÅ' },
            'white': { color: '#FFFFFF', name: '„Åó„Çç', object: '‚òÅÔ∏è', description: '„Åè„ÇÇ„Åø„Åü„ÅÑ„Å´ „Åó„Çç„ÅÑ„Å≠ÔºÅ' },
            'black': { color: '#000000', name: '„Åè„Çç', object: 'üåô', description: '„Çà„Çã„Åø„Åü„ÅÑ„Å´ „Åè„Çç„ÅÑ„Å≠ÔºÅ' },
            'pink': { color: '#FF69B4', name: '„Éî„É≥„ÇØ', object: 'üå∏', description: '„Åï„Åè„Çâ„Åø„Åü„ÅÑ„Å´ „Éî„É≥„ÇØ„Å†„Å≠ÔºÅ' },
            'brown': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: 'üç´', description: '„ÉÅ„Éß„Ç≥„Åø„Åü„ÅÑ„Å´ „Å°„ÇÉ„ÅÑ„Çç„Å†„Å≠ÔºÅ' },
            'gray': { color: '#808080', name: '„ÅØ„ÅÑ„ÅÑ„Çç', object: 'üê≠', description: '„Å≠„Åö„Åø„Åï„Çì„Åø„Åü„ÅÑ„Å™ „ÅÑ„Çç„Å†„Å≠ÔºÅ' },
            'lime': { color: '#32FF32', name: '„Åç„Åø„Å©„Çä', object: 'üçà', description: '„É°„É≠„É≥„Åø„Åü„ÅÑ„Å´ „Åç„Åø„Å©„Çä„Å†„Å≠ÔºÅ' },
            'lightblue': { color: '#87CEEB', name: '„Åø„Åö„ÅÑ„Çç', object: 'üíß', description: '„Åç„Çå„ÅÑ„Å™„Åø„Åö„Åø„Åü„ÅÑ„Å™ „ÅÑ„Çç„Å†„Å≠ÔºÅ' },

            // Âü∫Êú¨„ÅÆ2Ëâ≤Ê∑∑ÂêàÔºàÊ≠£Á¢∫„Å™Ê∏õÁÆóÊ∑∑ÂêàÔºâ
            'red+yellow': { color: '#FF6600', name: '„Ç™„É¨„É≥„Ç∏', object: 'ü•ï', description: '„Å´„Çì„Åò„Çì„Åø„Åü„ÅÑ„Å™ „Ç™„É¨„É≥„Ç∏„Åå„Åß„Åç„Åü„Å≠ÔºÅ' },
            'yellow+red': { color: '#FF6600', name: '„Ç™„É¨„É≥„Ç∏', object: 'ü•ï', description: '„Å´„Çì„Åò„Çì„Åø„Åü„ÅÑ„Å™ „Ç™„É¨„É≥„Ç∏„Åå„Åß„Åç„Åü„Å≠ÔºÅ' },
            
            'blue+red': { color: '#8B4B9B', name: '„ÇÄ„Çâ„Åï„Åç', object: 'üçÜ', description: '„Å™„Åô„Å≥„Åø„Åü„ÅÑ„Å™ „ÇÄ„Çâ„Åï„Åç„Åå„Åß„Åç„Åü„Å≠ÔºÅ' },
            'red+blue': { color: '#8B4B9B', name: '„ÇÄ„Çâ„Åï„Åç', object: 'üçÜ', description: '„Å™„Åô„Å≥„Åø„Åü„ÅÑ„Å™ „ÇÄ„Çâ„Åï„Åç„Åå„Åß„Åç„Åü„Å≠ÔºÅ' },
            
            'blue+yellow': { color: '#228B22', name: '„Åø„Å©„Çä', object: 'ü•í', description: '„Åç„ÇÖ„ÅÜ„Çä„Åø„Åü„ÅÑ„Å™ „Åø„Å©„Çä„Åå„Åß„Åç„Åü„Å≠ÔºÅ' },
            'yellow+blue': { color: '#228B22', name: '„Åø„Å©„Çä', object: 'ü•í', description: '„Åç„ÇÖ„ÅÜ„Çä„Åø„Åü„ÅÑ„Å™ „Åø„Å©„Çä„Åå„Åß„Åç„Åü„Å≠ÔºÅ' },

            // ÁôΩ„Å®„ÅÆÊ∑∑ÂêàÔºàÊòé„Çã„ÅèËñÑ„Åè„Å™„ÇãÔºâ
            'red+white': { color: '#FFB3B3', name: '„ÅÜ„Åô„ÅÇ„Åã', object: 'üå∏', description: '„Åï„Åè„Çâ„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„ÅÇ„Åã„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'white+red': { color: '#FFB3B3', name: '„ÅÜ„Åô„ÅÇ„Åã', object: 'üå∏', description: '„Åï„Åè„Çâ„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„ÅÇ„Åã„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'blue+white': { color: '#B3D9FF', name: '„ÅÜ„Åô„ÅÇ„Åä', object: '‚òÅÔ∏è', description: '„Åù„Çâ„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„ÅÇ„Åä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'white+blue': { color: '#B3D9FF', name: '„ÅÜ„Åô„ÅÇ„Åä', object: '‚òÅÔ∏è', description: '„Åù„Çâ„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„ÅÇ„Åä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'yellow+white': { color: '#FFFF99', name: '„ÅÜ„Åô„Åç„ÅÑ„Çç', object: 'üçÆ', description: '„Éó„É™„É≥„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„Åç„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'white+yellow': { color: '#FFFF99', name: '„ÅÜ„Åô„Åç„ÅÑ„Çç', object: 'üçÆ', description: '„Éó„É™„É≥„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„Åç„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'green+white': { color: '#B3FFB3', name: '„ÅÜ„Åô„Åø„Å©„Çä', object: 'üåø', description: '„Çè„Åã„Å∞„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„Åø„Å©„Çä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'white+green': { color: '#B3FFB3', name: '„ÅÜ„Åô„Åø„Å©„Çä', object: 'üåø', description: '„Çè„Åã„Å∞„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„Åø„Å©„Çä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'orange+white': { color: '#FFD9B3', name: '„ÅÜ„Åô„Ç™„É¨„É≥„Ç∏', object: 'üçë', description: '„ÇÇ„ÇÇ„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„Ç™„É¨„É≥„Ç∏„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'white+orange': { color: '#FFD9B3', name: '„ÅÜ„Åô„Ç™„É¨„É≥„Ç∏', object: 'üçë', description: '„ÇÇ„ÇÇ„Åø„Åü„ÅÑ„Å´ „ÅÜ„Åô„ÅÑ„Ç™„É¨„É≥„Ç∏„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'purple+white': { color: '#D9B3FF', name: '„ÅÜ„Åô„ÇÄ„Çâ„Åï„Åç', object: 'üíú', description: '„Åç„Çå„ÅÑ„Å™ „ÅÜ„Åô„ÅÑ„ÇÄ„Çâ„Åï„Åç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'white+purple': { color: '#D9B3FF', name: '„ÅÜ„Åô„ÇÄ„Çâ„Åï„Åç', object: 'üíú', description: '„Åç„Çå„ÅÑ„Å™ „ÅÜ„Åô„ÅÑ„ÇÄ„Çâ„Åï„Åç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },

            // Èªí„Å®„ÅÆÊ∑∑ÂêàÔºàÊöó„Åè„Å™„ÇãÔºâ
            'red+black': { color: '#800000', name: '„Åì„ÅÑ„ÅÇ„Åã', object: 'üçé', description: '„Å∂„ÅÇ„Å§„ÅÑ„Çä„Çì„Åî„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„ÅÇ„Åã„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'black+red': { color: '#800000', name: '„Åì„ÅÑ„ÅÇ„Åã', object: 'üçé', description: '„Å∂„ÅÇ„Å§„ÅÑ„Çä„Çì„Åî„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„ÅÇ„Åã„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'blue+black': { color: '#000080', name: '„Åì„ÅÑ„ÅÇ„Åä', object: 'üåä', description: '„Åµ„Åã„ÅÑ„ÅÜ„Åø„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„ÅÇ„Åä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'black+blue': { color: '#000080', name: '„Åì„ÅÑ„ÅÇ„Åä', object: 'üåä', description: '„Åµ„Åã„ÅÑ„ÅÜ„Åø„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„ÅÇ„Åä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'yellow+black': { color: '#808000', name: '„Åì„ÅÑ„Åç„ÅÑ„Çç', object: 'ü´í', description: '„Ç™„É™„Éº„Éñ„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„Åç„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'black+yellow': { color: '#808000', name: '„Åì„ÅÑ„Åç„ÅÑ„Çç', object: 'ü´í', description: '„Ç™„É™„Éº„Éñ„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„Åç„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            
            'green+black': { color: '#006400', name: '„Åì„ÅÑ„Åø„Å©„Çä', object: 'üå≤', description: '„ÇÇ„Çä„ÅÆ „Åç„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„Åø„Å©„Çä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'black+green': { color: '#006400', name: '„Åì„ÅÑ„Åø„Å©„Çä', object: 'üå≤', description: '„ÇÇ„Çä„ÅÆ „Åç„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„Åø„Å©„Çä„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },

            // Ê∑∑Ëâ≤„ÅåÈÄ≤„ÇÄ„Å®Ëå∂Ëâ≤„Éª„Ç∞„É¨„ÉºÁ≥ª„Å´„Å™„ÇãÔºà3Ëâ≤‰ª•‰∏äÔºâ
            'red+yellow+blue': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: 'ü§é', description: '3„Å§„ÅÆ„ÅÑ„Çç„Åå „Åæ„Åñ„Å£„Å¶ „Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'red+blue+yellow': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: 'ü§é', description: '3„Å§„ÅÆ„ÅÑ„Çç„Åå „Åæ„Åñ„Å£„Å¶ „Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'blue+red+yellow': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: 'ü§é', description: '3„Å§„ÅÆ„ÅÑ„Çç„Åå „Åæ„Åñ„Å£„Å¶ „Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'blue+yellow+red': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: 'ü§é', description: '3„Å§„ÅÆ„ÅÑ„Çç„Åå „Åæ„Åñ„Å£„Å¶ „Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'yellow+red+blue': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: 'ü§é', description: '3„Å§„ÅÆ„ÅÑ„Çç„Åå „Åæ„Åñ„Å£„Å¶ „Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'yellow+blue+red': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: 'ü§é', description: '3„Å§„ÅÆ„ÅÑ„Çç„Åå „Åæ„Åñ„Å£„Å¶ „Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },

            // ÁôΩ„ÅåÂÖ•„Çã„Å®Êòé„Çã„ÅÑËå∂Ëâ≤
            'red+yellow+blue+white': { color: '#D2B48C', name: '„ÅÜ„Åô„Å°„ÇÉ„ÅÑ„Çç', object: 'üß∏', description: '„Åè„Åæ„Åï„Çì„Åø„Åü„ÅÑ„Å™ „ÅÜ„Åô„ÅÑ„Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'red+blue+yellow+white': { color: '#D2B48C', name: '„ÅÜ„Åô„Å°„ÇÉ„ÅÑ„Çç', object: 'üß∏', description: '„Åè„Åæ„Åï„Çì„Åø„Åü„ÅÑ„Å™ „ÅÜ„Åô„ÅÑ„Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },

            // Èªí„ÅåÂÖ•„Çã„Å®Êöó„ÅÑËå∂Ëâ≤
            'red+yellow+blue+black': { color: '#654321', name: '„Åì„ÅÑ„Å°„ÇÉ„ÅÑ„Çç', object: '‚òï', description: '„Ç≥„Éº„Éí„Éº„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'red+blue+yellow+black': { color: '#654321', name: '„Åì„ÅÑ„Å°„ÇÉ„ÅÑ„Çç', object: '‚òï', description: '„Ç≥„Éº„Éí„Éº„Åø„Åü„ÅÑ„Å™ „Åì„ÅÑ„Å°„ÇÉ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },

            // Âêå„ÅòËâ≤„ÅÆÈáçË§áÔºà„Çà„ÇäÊøÉ„ÅèÔºâ
            'red+red': { color: '#CC0000', name: '„ÇÇ„Å£„Å®„ÅÇ„Åã', object: '‚ù§Ô∏è', description: '„ÅÇ„Åã„Åå 2„Å∞„ÅÑÔºÅ„ÇÇ„Å£„Å® „ÅÇ„Åã„Åè„Å™„Å£„Åü„Å≠ÔºÅ' },
            'blue+blue': { color: '#0000CC', name: '„ÇÇ„Å£„Å®„ÅÇ„Åä', object: 'üíô', description: '„ÅÇ„Åä„Åå 2„Å∞„ÅÑÔºÅ„ÇÇ„Å£„Å® „ÅÇ„Åä„Åè„Å™„Å£„Åü„Å≠ÔºÅ' },
            'yellow+yellow': { color: '#CCCC00', name: '„ÇÇ„Å£„Å®„Åç„ÅÑ„Çç', object: 'üíõ', description: '„Åç„ÅÑ„Çç„Åå 2„Å∞„ÅÑÔºÅ„ÇÇ„Å£„Å® „Åç„ÅÑ„Çç„Åè„Å™„Å£„Åü„Å≠ÔºÅ' },

            // Èªí„Å®ÁôΩ
            'black+white': { color: '#808080', name: '„ÅØ„ÅÑ„ÅÑ„Çç', object: 'üê≠', description: '„Åè„Çç„Å®„Åó„Çç„Åß „ÅØ„ÅÑ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'white+black': { color: '#808080', name: '„ÅØ„ÅÑ„ÅÑ„Çç', object: 'üê≠', description: '„Åó„Çç„Å®„Åè„Çç„Åß „ÅØ„ÅÑ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },

            // „Åü„Åè„Åï„Çì„ÅÆËâ≤„ÅåÊ∑∑„Åñ„Çã„Å®Êöó„ÅÑËâ≤„Å´
            'red+yellow+blue+green': { color: '#696969', name: '„Åì„ÅÑ„ÅØ„ÅÑ„ÅÑ„Çç', object: 'ü™®', description: '„Åü„Åè„Åï„Çì„ÅÆ „ÅÑ„Çç„Åå „Åæ„Åñ„Å£„Å¶ „Åì„ÅÑ „ÅØ„ÅÑ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' },
            'red+blue+green+orange': { color: '#654321', name: '„Å§„Å°„ÅÑ„Çç', object: 'üèîÔ∏è', description: '„ÇÑ„Åæ„ÅÆ „Å§„Å°„Åø„Åü„ÅÑ„Å™ „ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' }
        };

        // ÂäπÊûúÈü≥„Çí‰ΩúÊàê„Åô„ÇãÈñ¢Êï∞
        function playSound(frequency, duration, type = 'sine') {
            if (!window.AudioContext) return;
            
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        // ËÉåÊôØ„ÅÆÊòü„ÇíÁîüÊàê
        function createBackgroundStars() {
            const container = document.getElementById('backgroundStars');
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(star);
            }
        }

        // ÂÆüÁ∏æ„Ç∑„Çπ„ÉÜ„É†
        function showAchievement(message) {
            const achievement = document.getElementById('achievement');
            achievement.textContent = message;
            achievement.classList.add('show');
            
            playSound(600, 0.2);
            setTimeout(() => playSound(800, 0.2), 200);
            
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }

        function checkAchievements() {
            if (mixCount === 1 && !achievements.includes('first')) {
                achievements.push('first');
                showAchievement('üéâ „ÅØ„Åò„ÇÅ„Å¶„ÅÆ „ÅÑ„Çç„Åæ„Åú „Åõ„ÅÑ„Åì„ÅÜÔºÅ');
            } else if (mixCount === 5 && !achievements.includes('five')) {
                achievements.push('five');
                showAchievement('‚≠ê 5„Åã„ÅÑ „ÅÑ„Çç„Åæ„Åú„Åó„Åü„ÇàÔºÅ');
            } else if (mixCount === 10 && !achievements.includes('ten')) {
                achievements.push('ten');
                showAchievement('üèÜ „ÅÑ„Çç„Åæ„Åú„Éû„Çπ„Çø„ÉºÔºÅ');
            }
        }

        function selectColor(colorName, hexColor, displayText) {
            if (selectedColors.length >= maxColorsToMix) {
                playSound(200, 0.3);
                return;
            }
            if (selectedColors.some(c => c.name === colorName)) {
                playSound(200, 0.3);
                return;
            }
            
            // ÈÅ∏ÊäûÈü≥
            playSound(400 + selectedColors.length * 100, 0.2);
            
            selectedColors.push({ name: colorName, hex: hexColor, text: displayText });
            document.querySelector(`.color-button.${colorName}`).classList.add('selected');
            updateSelectedDisplay();
            updateMixButton();
        }

        function updateSelectedDisplay() {
            const display = document.getElementById('selectedDisplay');
            display.innerHTML = '';
            selectedColors.forEach((color, i) => {
                const div = document.createElement('div');
                div.className = 'selected-color';
                div.style.background = `radial-gradient(circle at 30% 30%, ${color.hex}CC, ${color.hex})`;
                
                const btn = document.createElement('button');
                btn.className = 'remove-btn';
                btn.textContent = '√ó';
                btn.onclick = () => removeSelectedColor(i);
                
                div.appendChild(btn);
                display.appendChild(div);
            });
        }

        function removeSelectedColor(i) {
            playSound(300, 0.2);
            const removed = selectedColors[i];
            selectedColors.splice(i, 1);
            document.querySelector(`.color-button.${removed.name}`).classList.remove('selected');
            updateSelectedDisplay();
            updateMixButton();
        }

        function updateMixButton() {
            const button = document.getElementById('mixButton');
            button.disabled = selectedColors.length < 1;
            
            if (selectedColors.length > 0) {
                button.style.animation = 'pulse 1s infinite';
            } else {
                button.style.animation = 'none';
            }
        }

        function mixColors() {
            if (selectedColors.length < 1) return;
            
            // „Éü„ÉÉ„ÇØ„ÇπÈü≥
            playSound(220, 0.1);
            setTimeout(() => playSound(330, 0.1), 100);
            setTimeout(() => playSound(440, 0.3), 200);
            
            const names = selectedColors.map(c => c.name).sort();
            let result = findColorResult(names);
            
            if (!result) {
                // Áâ©ÁêÜÁöÑÂπ≥ÂùáËâ≤„ÇíË®àÁÆóÔºàÊ∏õÁÆóÊ∑∑Âêà„ÅÆËøë‰ººÔºâ
                const avg = calculateSubtractiveColor(selectedColors.map(c => c.hex));
                result = { 
                    color: avg, 
                    name: selectedColors.length >= 4 ? '„Åì„ÅÑ„ÅØ„ÅÑ„ÅÑ„Çç' : '„Åæ„Åñ„Å£„Åü„ÅÑ„Çç', 
                    object: selectedColors.length >= 4 ? 'ü™®' : 'üé®',
                    description: selectedColors.length >= 4 ? '„Åü„Åè„Åï„Çì„Åæ„Åñ„Å£„Å¶ „Åì„ÅÑ„ÅØ„ÅÑ„ÅÑ„Çç„Å´„Å™„Å£„Åü„Å≠ÔºÅ' : '„ÅÇ„Åü„Çâ„Åó„ÅÑ „ÅÑ„Çç„Åå „Åß„Åç„Åü„Å≠ÔºÅ'
                };
            }
            
            displayResult(result);
            mixCount++;
            updateScore();
            checkAchievements();
            celebrate();
        }

        function findColorResult(names) {
            // Ê≠£Á¢∫„Å™ÁµÑ„ÅøÂêà„Çè„Åõ„ÇíÊ§úÁ¥¢
            const key = names.join('+');
            if (colorResults[key]) return colorResults[key];
            
            // È†ÜÁï™„ÇíÂ§â„Åà„Å¶Ê§úÁ¥¢Ôºà2Ëâ≤„ÅÆÂ†¥ÂêàÔºâ
            if (names.length === 2) {
                const reverseKey = names[1] + '+' + names[0];
                if (colorResults[reverseKey]) return colorResults[reverseKey];
            }
            
            // 3Ëâ≤„ÅÆÂü∫Êú¨„Éë„Çø„Éº„É≥
            if (names.length === 3) {
                const permutations = [
                    names.join('+'),
                    [names[1], names[0], names[2]].join('+'),
                    [names[2], names[0], names[1]].join('+'),
                    [names[0], names[2], names[1]].join('+'),
                    [names[1], names[2], names[0]].join('+'),
                    [names[2], names[1], names[0]].join('+')
                ];
                
                for (const perm of permutations) {
                    if (colorResults[perm]) return colorResults[perm];
                }
            }
            
            return null;
        }

        // Ê∏õÁÆóÊ∑∑Âêà„ÅÆËøë‰ººË®àÁÆóÔºà„Çà„ÇäÁèæÂÆüÁöÑ„Å™Ëâ≤Ê∑∑ÂêàÔºâ
        function calculateSubtractiveColor(hexs) {
            let totalR = 0, totalG = 0, totalB = 0;
            
            hexs.forEach(hex => {
                const r = parseInt(hex.slice(1, 3), 16) / 255;
                const g = parseInt(hex.slice(3, 5), 16) / 255;
                const b = parseInt(hex.slice(5, 7), 16) / 255;
                
                // Ê∏õÁÆóÊ∑∑Âêà„ÅÆËøë‰ººÔºà‰πóÁÆóÁöÑ„Å™Ê∑∑ÂêàÔºâ
                totalR += (1 - r);
                totalG += (1 - g);
                totalB += (1 - b);
            });
            
            const n = hexs.length;
            const finalR = Math.max(0, 1 - (totalR / n));
            const finalG = Math.max(0, 1 - (totalG / n));
            const finalB = Math.max(0, 1 - (totalB / n));
            
            return `#${Math.round(finalR * 255).toString(16).padStart(2,'0')}${Math.round(finalG * 255).toString(16).padStart(2,'0')}${Math.round(finalB * 255).toString(16).padStart(2,'0')}`;
        }

        function displayResult(result) {
            const box = document.getElementById('resultColor');
            box.classList.add('mixed');
            box.style.background = `radial-gradient(circle at 30% 30%, ${result.color}DD, ${result.color})`;
            box.style.color = (result.name.includes('„Åó„Çç') || result.name.includes('„ÅÜ„Åô') || result.name.includes('„Åç„ÅÑ„Çç')) ? '#333' : '#fff';
            box.innerHTML = `
                ${result.object}<br>
                <span>${result.name}</span>
                <div class="description">${result.description}</div>
            `;
            
            setTimeout(() => {
                box.classList.remove('mixed');
            }, 1000);
        }

        function addColorSlot() {
            if (maxColorsToMix < 6) {
                maxColorsToMix++;
                document.getElementById('maxColors').textContent = maxColorsToMix;
                playSound(500, 0.2);
            }
        }

        function removeColorSlot() {
            if (maxColorsToMix > 2) {
                maxColorsToMix--;
                document.getElementById('maxColors').textContent = maxColorsToMix;
                playSound(400, 0.2);
                
                if (selectedColors.length > maxColorsToMix) {
                    const excess = selectedColors.splice(maxColorsToMix);
                    excess.forEach(c => {
                        document.querySelector(`.color-button.${c.name}`).classList.remove('selected');
                    });
                    updateSelectedDisplay();
                    updateMixButton();
                }
            }
        }

        function toggleColorVisibility() {
            const container = document.getElementById('colorButtons');
            const button = document.querySelector('[onclick="toggleColorVisibility()"]');
            const isHidden = container.style.display === 'none';
            
            if (isHidden) {
                container.style.display = 'grid';
                button.textContent = '„ÅÑ„Çç„Çí„Åã„Åè„Åô üëÅÔ∏è';
                playSound(600, 0.2);
            } else {
                container.style.display = 'none';
                button.textContent = '„ÅÑ„Çç„Çí„Åø„Åõ„Çã ‚ú®';
                playSound(400, 0.2);
                clearAll();
            }
        }

        function toggleFunMode() {
            isFunMode = !isFunMode;
            const body = document.body;
            const button = document.querySelector('.fun-mode-toggle');
            
            if (isFunMode) {
                body.classList.add('fun-mode');
                button.textContent = '„Åµ„Å§„ÅÜ„É¢„Éº„Éâ üòä';
                playSound(800, 0.5);
                showAchievement('üéâ „Åü„ÅÆ„Åó„ÅÑ„É¢„Éº„Éâ „Ç™„É≥ÔºÅ');
            } else {
                body.classList.remove('fun-mode');
                button.textContent = '„Åü„ÅÆ„Åó„ÅÑ„É¢„Éº„Éâ üéâ';
                playSound(600, 0.3);
            }
        }

        function updateScore() {
            document.getElementById('scoreText').textContent = `„Å§„Åè„Å£„Åü„ÅÑ„Çç: ${mixCount}„Åì`;
        }

        function celebrate() {
            const celebration = document.getElementById('celebration');
            celebration.innerHTML = '';
            celebration.classList.add('active');
            
            const colors = ['#FFC1E3', '#A8D8F8', '#B8E8B8', '#FFC107', '#FF6B6B'];
            const emojis = ['‚≠ê', '‚ú®', 'üéâ', 'üéä', 'üí´'];
            
            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement('div');
                if (Math.random() < 0.3) {
                    confetti.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    confetti.style.fontSize = '20px';
                } else {
                    confetti.className = 'confetti';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                }
                
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.style.position = 'absolute';
                
                celebration.appendChild(confetti);
            }
            
            setTimeout(() => {
                celebration.classList.remove('active');
            }, 3000);
        }

        function clearAll() {
            playSound(350, 0.4);
            selectedColors = [];
            document.querySelectorAll('.color-button').forEach(button => {
                button.classList.remove('selected');
            });
            document.getElementById('selectedDisplay').innerHTML = '';
            
            const box = document.getElementById('resultColor');
            box.style.background = '#f0f0f0';
            box.innerHTML = 'Ôºü';
            box.style.color = '#999';
            box.classList.remove('mixed');
            
            updateMixButton();
        }

        // ÂàùÊúüÂåñ
        window.addEventListener('load', () => {
            createBackgroundStars();
            updateMixButton();
            
            setTimeout(() => {
                if (mixCount === 0) {
                    showAchievement('üé® „ÅÑ„Çç„Çí „Åà„Çâ„Çì„Åß „Åæ„Åú„Å¶„Åø„Çà„ÅÜÔºÅ');
                }
            }, 2000);
        });

        // „Çø„ÉÉ„ÉÅ„Éá„Éê„Ç§„ÇπÂØæÂøú
        document.addEventListener('touchstart', function(e) {
            if (e.target.classList.contains('color-button')) {
                e.target.style.transform = 'scale(0.95)';
            }
        });

        document.addEventListener('touchend', function(e) {
            if (e.target.classList.contains('color-button')) {
                setTimeout(() => {
                    e.target.style.transform = '';
                }, 100);
            }
        });
    </script>
</body>
</html>

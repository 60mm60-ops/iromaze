<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé® „ÅÑ„Çç„Åæ„Åú„ÅÇ„Åù„Å≥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Comic Sans MS', 'Hiragino Kaku Gothic Pro', sans-serif;
            background: linear-gradient(135deg, #A8D8F8 0%, #B8E8B8 50%, #FFD8E8 100%);
            min-height: 100vh; padding: 20px; color: #333; text-align: center;
        }
        .container { max-width: 700px; margin: 0 auto; background: white; border-radius: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; border: 5px solid #FFC107; }
        .header { background: linear-gradient(45deg, #FFC1E3, #A8D8F8); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 3em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .header p { font-size: 1.5em; opacity: 0.9; }
        .main-content { padding: 40px 30px; background: white; }
        .controls { display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
        .control-button {
            background: linear-gradient(45deg, #FF6B6B, #FF8C00); color: white; border: none; border-radius: 20px;
            padding: 10px 20px; font-size: 1.2em; font-weight: bold; cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .control-button:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
        .color-count-display {
            background: #FFC107; color: #333; padding: 15px; border-radius: 20px;
            font-size: 1.3em; font-weight: bold; margin-bottom: 20px;
        }
        .color-buttons {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(90px, 1fr));
            gap: 15px; margin-bottom: 40px; justify-items: center;
        }
        .color-button {
            width: 90px; height: 90px; border-radius: 50%; border: 6px solid white; cursor: pointer;
            transition: all 0.3s ease; box-shadow: 0 8px 20px rgba(0,0,0,0.2); position: relative;
            display: flex; align-items: center; justify-content: center; font-size: 1.4em; color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7); font-weight: bold;
        }
        .color-button:hover { transform: scale(1.1); box-shadow: 0 12px 30px rgba(0,0,0,0.3); }
        .color-button.selected { transform: scale(1.2) rotate(10deg); border-color: #FFC107; border-width: 8px; animation: bounce 0.5s ease-in-out; }
        @keyframes bounce { 0%,100%{ transform: scale(1.2) rotate(10deg);} 50%{ transform: scale(1.3) rotate(-10deg);} }
        .red { background-color: #FF6B6B; } .yellow { background-color: #FFD700; } .blue { background-color: #4169E1; }
        .green { background-color: #32CD32; } .orange { background-color: #FF8C00; } .purple { background-color: #9932CC; }
        .white { background-color: #FFFFFF; border-color: #333; color: #333; text-shadow: none; }
        .black { background-color: #000000; } .pink { background-color: #FF69B4; } .brown { background-color: #8B4513; }
        .gray { background-color: #808080; } .lime { background-color: #32FF32; } .lightblue { background-color: #87CEEB; }
        .selected-colors { margin-bottom: 30px; text-align: center; }
        .selected-colors h3 { font-size: 2em; margin-bottom: 20px; color: #333; }
        .selected-display { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .selected-color { width: 60px; height: 60px; border-radius: 50%; border: 4px solid #FFC107;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); transition: all 0.5s ease; position: relative; }
        .selected-color .remove-btn {
            position: absolute; top: -8px; right: -8px; width: 20px; height: 20px;
            background: #FF6B6B; border: none; border-radius: 50%; color: white;
            font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-weight: bold;
        }
        .mix-button {
            background: linear-gradient(45deg, #FFC1E3, #A8D8F8); color: white; border: none;
            border-radius: 25px; padding: 20px 40px; font-size: 2em; font-weight: bold; cursor: pointer;
            transition: all 0.3s ease; box-shadow: 0 8px 20px rgba(0,0,0,0.2); margin: 0 20px;
        }
        .mix-button:hover { transform: translateY(-3px); box-shadow: 0 12px 30px rgba(0,0,0,0.3); }
        .mix-button:disabled { background: #ccc; cursor: not-allowed; transform: none; }
        .result-area { text-align: center; margin-top: 40px; }
        .result-area h3 { font-size: 2.5em; margin-bottom: 30px; color: #333; }
        .result-color {
            width: 200px; height: 200px; border-radius: 50%; margin: 0 auto 30px; border: 8px solid #FFC107;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2); background: #f0f0f0;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5em; color: #999; flex-direction: column; padding: 20px;
        }
        .result-color span { font-size: 0.8em; color: #333; font-weight: bold; }
        .clear-button {
            background: #FF6B6B; color: white; border: none; border-radius: 20px;
            padding: 15px 30px; font-size: 1.5em; font-weight: bold; cursor: pointer;
            transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .clear-button:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
        .celebration { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; }
        .celebration.active { display: block; animation: celebrate 2s ease-out; }
        @keyframes celebrate { 0%{opacity:0;} 50%{opacity:1;} 100%{opacity:0;} }
        .confetti { position: absolute; width: 10px; height: 10px; background: #FFD700; animation: fall 2s linear infinite; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); } }
        @media (max-width: 768px) {
            .color-buttons { grid-template-columns: repeat(3, 1fr); gap: 10px; }
            .color-button { width: 70px; height: 70px; font-size: 1.1em; }
            .header h1 { font-size: 2.5em; } .header p { font-size: 1.2em; }
            .result-color { width: 150px; height: 150px; }
            .main-content { padding: 20px 15px; }
            .selected-color { width: 50px; height: 50px; }
            .controls { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® „ÅÑ„Çç„Åæ„Åú„ÅÇ„Åù„Å≥</h1>
            <p>„ÅÑ„Çç„Çí„Åà„Çâ„Çì„Åß „Åæ„Åú„Å¶„Åø„Çà„ÅÜÔºÅ</p>
        </div>

        <div class="main-content">
            <div class="controls">
                <button class="control-button" onclick="addColorSlot()">„ÅÑ„Çç„Çí„Åµ„ÇÑ„Åô ‚ûï</button>
                <button class="control-button" onclick="removeColorSlot()">„ÅÑ„Çç„Çí„Å∏„Çâ„Åô ‚ûñ</button>
                <button class="control-button" onclick="addNewColors()">„ÅÑ„Çç„Çí„Åã„Åè„Åô üëÅÔ∏è</button>
            </div>

            <div class="color-count-display" id="colorCountDisplay">
                „Åæ„Åú„Çâ„Çå„Çã„ÅÑ„Çç„ÅÆ„Åã„Åö: <span id="maxColors">4</span>„Åì
            </div>

            <div class="color-buttons" id="colorButtons">
                <div class="color-button red" onclick="selectColor('red', '#FF6B6B', '„ÅÇ„Åã')">„ÅÇ„Åã</div>
                <div class="color-button yellow" onclick="selectColor('yellow', '#FFD700', '„Åç„ÅÑ„Çç')">„Åç„ÅÑ„Çç</div>
                <div class="color-button blue" onclick="selectColor('blue', '#4169E1', '„ÅÇ„Åä')">„ÅÇ„Åä</div>
                <div class="color-button green" onclick="selectColor('green', '#32CD32', '„Åø„Å©„Çä')">„Åø„Å©„Çä</div>
                <div class="color-button orange" onclick="selectColor('orange', '#FF8C00', '„Ç™„É¨„É≥„Ç∏')">„Ç™„É¨„É≥„Ç∏</div>
                <div class="color-button purple" onclick="selectColor('purple', '#9932CC', '„ÇÄ„Çâ„Åï„Åç')">„ÇÄ„Çâ„Åï„Åç</div>
                <div class="color-button pink" onclick="selectColor('pink', '#FF69B4', '„Éî„É≥„ÇØ')">„Éî„É≥„ÇØ</div>
                <div class="color-button brown" onclick="selectColor('brown', '#8B4513', '„Å°„ÇÉ„ÅÑ„Çç')">„Å°„ÇÉ„ÅÑ„Çç</div>
                <div class="color-button lightblue" onclick="selectColor('lightblue', '#87CEEB', '„Åø„Åö„ÅÑ„Çç')">„Åø„Åö„ÅÑ„Çç</div>
                <div class="color-button lime" onclick="selectColor('lime', '#32FF32', '„Åç„Åø„Å©„Çä')">„Åç„Åø„Å©„Çä</div>
                <div class="color-button white" onclick="selectColor('white', '#FFFFFF', '„Åó„Çç')">„Åó„Çç</div>
                <div class="color-button black" onclick="selectColor('black', '#000000', '„Åè„Çç')">„Åè„Çç</div>
            </div>

            <div class="selected-colors">
                <h3>„Åà„Çâ„Çì„Å†„ÅÑ„Çç</h3>
                <div class="selected-display" id="selectedDisplay"></div>
                <button class="mix-button" id="mixButton" onclick="mixColors()" disabled>
                    „ÅÑ„Çç„Çí„Åæ„Åú„Çã ‚ú®
                </button>
            </div>

            <div class="result-area">
                <h3>„Åß„Åç„Åü„ÅÑ„Çç</h3>
                <div class="result-color" id="resultColor">Ôºü</div>
                <button class="clear-button" onclick="clearAll()">„ÇÇ„ÅÜ„ÅÑ„Å°„Å© üîÑ</button>
            </div>
        </div>
    </div>

    <div class="celebration" id="celebration"></div>

    <script>
        let selectedColors = [];
        let maxColorsToMix = 4;

        const colorResults = {
            // ÂçòËâ≤
            'red': { color: '#FF6B6B', name: '„ÅÇ„Åã', object: '„Çä„Çì„Åî' },
            'yellow': { color: '#FFD700', name: '„Åç„ÅÑ„Çç', object: '„Å≤„Åæ„Çè„Çä' },
            'blue': { color: '#4169E1', name: '„ÅÇ„Åä', object: '„Åù„Çâ' },
            'green': { color: '#32CD32', name: '„Åø„Å©„Çä', object: '„ÅØ„Å£„Å±' },
            'orange': { color: '#FF8C00', name: '„Ç™„É¨„É≥„Ç∏', object: '„Åø„Åã„Çì' },
            'purple': { color: '#9932CC', name: '„ÇÄ„Çâ„Åï„Åç', object: '„Å∂„Å©„ÅÜ' },
            'white': { color: '#FFFFFF', name: '„Åó„Çç', object: '„ÇÜ„Åç' },
            'black': { color: '#000000', name: '„Åè„Çç', object: '„Çà„Çã' },
            'pink': { color: '#FF69B4', name: '„Éî„É≥„ÇØ', object: '„Åï„Åè„Çâ' },
            'brown': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: '„ÉÅ„Éß„Ç≥„É¨„Éº„Éà' },
            'gray': { color: '#808080', name: '„ÅØ„ÅÑ„ÅÑ„Çç', object: '„Åè„ÇÇ' },
            'lime': { color: '#32FF32', name: '„Åç„Åø„Å©„Çä', object: '„É°„É≠„É≥' },
            'lightblue': { color: '#87CEEB', name: '„Åø„Åö„ÅÑ„Çç', object: '„Åø„Åö„ÅÜ„Åø' },

            // 2Ëâ≤
            'red+yellow': { color: '#FF8C00', name: '„Ç™„É¨„É≥„Ç∏', object: '„Åü„ÅÑ„Çà„ÅÜ' },
            'red+blue': { color: '#9932CC', name: '„ÇÄ„Çâ„Åï„Åç', object: '„Å∂„Å©„ÅÜ' },
            'yellow+blue': { color: '#32CD32', name: '„Åø„Å©„Çä', object: '„ÅØ„Å£„Å±' },
            'red+white': { color: '#FFB6C1', name: '„Éî„É≥„ÇØ', object: '„Åï„Åè„Çâ' },
            'blue+white': { color: '#ADD8E6', name: '„Åø„Åö„ÅÑ„Çç', object: '„ÅÇ„ÇÅ' },
            'yellow+white': { color: '#FFFACD', name: '„ÇØ„É™„Éº„É†„ÅÑ„Çç', object: '„Éó„É™„É≥' },
            'red+black': { color: '#800000', name: '„Åà„Çì„Åò', object: '„Åë„Å£„Åó„Çá„ÅÜ' },
            'blue+black': { color: '#191970', name: '„Åì„Çì', object: '„Çà„Çã„ÅÆ„Åù„Çâ' },
            'yellow+black': { color: '#808000', name: '„Ç™„É™„Éº„Éñ', object: '„ÇÇ„Çä' },
            'white+black': { color: '#808080', name: '„ÅØ„ÅÑ„ÅÑ„Çç', object: '„ÅÑ„Åó' },
            'orange+white': { color: '#FFDAB9', name: '„ÅÜ„Åô„Ç™„É¨„É≥„Ç∏', object: '„ÇÇ„ÇÇ' },
            'purple+white': { color: '#DDA0DD', name: '„ÅÜ„Åô„ÇÄ„Çâ„Åï„Åç', object: '„É©„Éô„É≥„ÉÄ„Éº' },
            'green+white': { color: '#98FB98', name: '„ÅÜ„Åô„Åø„Å©„Çä', object: '„Çè„Åã„Å∞' },
            'red+green': { color: '#A0522D', name: '„Å°„ÇÉ„ÅÑ„Çç', object: '„Å§„Å°' },
            'blue+green': { color: '#008B8B', name: '„ÅÇ„Åä„Åø„Å©„Çä', object: '„ÅÜ„Åø„Åπ' },
            'red+orange': { color: '#FF4500', name: '„Åó„ÇÖ„ÅÑ„Çç', object: '„Éà„Éû„Éà' },
            'yellow+green': { color: '#ADFF2F', name: '„Åç„Åø„Å©„Çä', object: '„Åç„ÇÖ„ÅÜ„Çä' },
            'blue+purple': { color: '#4B0082', name: '„Åµ„Åã„ÇÄ„Çâ„Åï„Åç', object: '„Å™„Åô' },
            'orange+black': { color: '#8B4513', name: '„Åì„Åí„Å°„ÇÉ', object: '„Ç≥„Éº„Éí„Éº' },

            // 3Ëâ≤
            'red+yellow+blue': { color: '#8B4513', name: '„Å°„ÇÉ„ÅÑ„Çç', object: '„Å§„Å°' },
            'red+yellow+white': { color: '#FFDAB9', name: '„ÅÜ„Åô„Ç™„É¨„É≥„Ç∏', object: '„ÇÇ„ÇÇ' },
            'red+blue+white': { color: '#DDA0DD', name: '„ÅÜ„Åô„ÇÄ„Çâ„Åï„Åç', object: '„Åô„Åø„Çå' },
            'yellow+blue+white': { color: '#F0F8B4', name: '„ÅÜ„Åô„Åø„Å©„Çä', object: '„Çè„Åã„Å∞' },
            'red+yellow+black': { color: '#5C4033', name: '„Åì„Åí„Å°„ÇÉ', object: '„Ç≥„Éº„Éí„Éº„Åæ„ÇÅ' },
            'red+blue+black': { color: '#2B124C', name: '„Åè„Çç„ÇÄ„Çâ„Åï„Åç', object: '„Å™„Åô' },
            'yellow+blue+black': { color: '#556B2F', name: '„Ç™„É™„Éº„Éñ„ÅÑ„Çç', object: '„ÇÇ„Çä' },

            // 4Ëâ≤‰ª•‰∏ä
            'red+yellow+blue+white': { color: '#D2B48C', name: '„Éô„Éº„Ç∏„É•', object: '„Åô„Å™' },
            'red+yellow+blue+black': { color: '#4B4B4B', name: '„Åì„ÅÑ„ÅØ„ÅÑ„ÅÑ„Çç', object: '„ÅÑ„Åó' },
        };

        function selectColor(colorName, hexColor, displayText) {
            if (selectedColors.length >= maxColorsToMix) return;
            if (selectedColors.some(c => c.name === colorName)) return;
            selectedColors.push({ name: colorName, hex: hexColor, text: displayText });
            document.querySelector(`.color-button.${colorName}`).classList.add('selected');
            updateSelectedDisplay(); updateMixButton();
        }
        function updateSelectedDisplay() {
            const display = document.getElementById('selectedDisplay');
            display.innerHTML = '';
            selectedColors.forEach((color, i) => {
                const div = document.createElement('div');
                div.className = 'selected-color'; div.style.backgroundColor = color.hex;
                const btn = document.createElement('button');
                btn.className = 'remove-btn'; btn.textContent = '√ó';
                btn.onclick = () => removeSelectedColor(i);
                div.appendChild(btn); display.appendChild(div);
            });
        }
        function removeSelectedColor(i) {
            const removed = selectedColors[i];
            selectedColors.splice(i, 1);
            document.querySelector(`.color-button.${removed.name}`).classList.remove('selected');
            updateSelectedDisplay(); updateMixButton();
        }
        function updateMixButton() {
            document.getElementById('mixButton').disabled = selectedColors.length < 1;
        }
        function mixColors() {
            if (selectedColors.length < 1) return;
            const names = selectedColors.map(c => c.name).sort();
            const key = names.join('+');
            let result = colorResults[key];
            if (!result) {
                const avg = calculateAverageColor(selectedColors.map(c => c.hex));
                if (selectedColors.length >= 4) result = { color: avg, name: '„Åî„Å°„ÇÉ„Åæ„Åú„ÅÑ„Çç', object: '„Å≠„Çì„Å©' };
                else result = { color: avg, name: '„Åæ„Åñ„Å£„Åü„ÅÑ„Çç', object: '„Åà„ÅÆ„Åê' };
            }
            const box = document.getElementById('resultColor');
            box.style.backgroundColor = result.color;
            box.style.color = (result.name.includes('„Åó„Çç') || result.name.includes('„ÅÜ„Åô')) ? '#333' : '#fff';
            box.innerHTML = `<span>${result.object}</span><br><span>(${result.name})</span>`;
            box.style.fontSize = '1.5em'; celebrate();
        }
        function calculateAverageColor(hexs) {
            let r=0,g=0,b=0;
            hexs.forEach(h=>{
                r+=parseInt(h.slice(1,3),16);
                g+=parseInt(h.slice(3,5),16);
                b+=parseInt(h.slice(5,7),16);
            });
            const n=hexs.length;
            return `#${Math.round(r/n).toString(16).padStart(2,'0')}${Math.round(g/n).toString(16).padStart(2,'0')}${Math.round(b/n).toString(16).padStart(2,'0')}`;
        }
        function addColorSlot(){ if(maxColorsToMix<6){ maxColorsToMix++; document.getElementById('maxColors').textContent=maxColorsToMix; } }
        function removeColorSlot(){ if(maxColorsToMix>2){ maxColorsToMix--; document.getElementById('maxColors').textContent=maxColorsToMix;
            if(selectedColors.length>maxColorsToMix){ const excess=selectedColors.splice(maxColorsToMix); excess.forEach(c=>{document.querySelector(`.color-button.${c.name}`).classList.remove('selected');}); updateSelectedDisplay(); updateMixButton(); } } }
        function addNewColors(){ const cont=document.getElementById('colorButtons'); const hidden=cont.style.display==='none';
            if(hidden){ cont.style.display='grid'; document.querySelector('[onclick="addNewColors()"]').textContent='„ÅÑ„Çç„Çí„Åã„Åè„Åô üëÅÔ∏è'; }
            else { cont.style.display='none'; document.querySelector('[onclick="addNewColors()"]').textContent='„ÅÑ„Çç„Çí„Åø„Åõ„Çã ‚ú®'; clearAll(); } }
        function celebrate(){ const c=document.getElementById('celebration'); c.innerHTML=''; c.classList.add('active');
            const colors=['#FFC1E3','#A8D8F8','#B8E8B8','#FFC107','#FF6B6B'];
            for(let i=0;i<50;i++){ const f=document.createElement('div'); f.className='confetti';
                f.style.left=Math.random()*100+'%'; f.style.backgroundColor=colors[Math.floor(Math.random()*colors.length)];
                f.style.animationDelay=Math.random()*2+'s'; f.style.animationDuration=(Math.random()*2+2)+'s'; c.appendChild(f); }
            setTimeout(()=>c.classList.remove('active'),2000); }
        function clearAll(){ selectedColors=[]; document.querySelectorAll('.color-button').forEach(b=>b.classList.remove('selected'));
            document.getElementById('selectedDisplay').innerHTML=''; const box=document.getElementById('resultColor');
            box.style.backgroundColor='#f0f0f0'; box.innerHTML='Ôºü'; box.style.color='#999'; box.style.fontSize='1.5em'; updateMixButton(); }
    </script>
</body>
</html>
